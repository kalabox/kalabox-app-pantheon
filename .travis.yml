language: node_js
sudo: required
node_js:
- '4.2'
before_install:
- cp ci/travis-ci.sh $HOME/
- chmod +x $HOME/travis-ci.sh
- $HOME/travis-ci.sh before-install
before_script:
- $HOME/travis-ci.sh before-script
script:
- $HOME/travis-ci.sh script
after_script:
- $HOME/travis-ci.sh after-script
after_success:
- $HOME/travis-ci.sh after-success
before_deploy:
- $HOME/travis-ci.sh before-deploy
after_deploy:
- $HOME/travis-ci.sh after-deploy
cache:
  directories:
  - node_modules
notifications:
  irc:
  - chat.freenode.net#kalabox
  email:
    recipients:
    - mike@kalabox.io
    - riley@kalabox.io
    on_success: always
deploy:
  provider: npm
  email: mike@kalamuna.com
  api_key:
    secure: LqETVZKmboyL3rFtpENXSR8oAN4P5KZHh9XtUambSRXEWkWO2vfyfjjBPZfgll2XdvFikCR2ymujbl4bpnPzY2gyGtGm6wsL0ngCCtzs/mIF5JuKU6v/lO0dKPyj6PC+CB3ZY32Ax4HjsWIKw9v+On/kdz1PimkYWH0fgtrnXkoTs01NgTp1l3c1ASrqjtRjmTYWgsYDHRGKUukYH+wZSSTj4bfln0UcOr907Qzsj1oKWCyK5Hc0InWO4TCrULJa4F6qG70WNnStgbSkz010vutIOtmk11HgDzbaLbetEbF5KNv59jED2WY3/mJbjK3l2vrObM1NG09Je0xKh7fcadENrFTKaLXjxgy0TFOGih6M9qu455/pi68f76tI3d6AcLj9jhylyrYcqpWWyHQfhlluRC3g4YF4+HDh5dG5gqUD5TxMj/r8P2UG8BjlS/Ytn0eYxJsJ9l8g5OdBx7jP0iXArtIyPQeNkhXlUS9aumLufxgOmCrIX2CZTHF97GxosD6nNoYTd7ADfwl6Z5ByucDRDQAycBoMO6ALjM3rIu/WgNg8yr/+jj8DqikW5ye6mnVa03wSOSShfu3VvIA2UrbTW4FU5/H/oNM+BrkUldg+w7rl3LxQSO/fA38Vre1DEdveOomxRMEjNJKmhE1yn9zRE0Zb0wb+yfQOfCFYkuw=
  on:
    tags: true
    branch: v0.12
    repo: kalabox/kalabox-app-pantheon
env:
  global:
    - secure: "tf0Y1Cvdya0+SOw2h8Zz26rzsvTdS+Ij6uTxmu422pvIY5YfaGfDn051hfKPhsiNsyABSzwqJpD7uz3Dyi9Fab3aaeodrauQYyBeFVBjNAaLzVTkM66VkB8soI0BFKkWrE3jnVUulFHdlJRpd+Hl8fAC6axRkVejC8iSeOzQI7YQhnyKxY8lPrN5tbsm4x2B1lmeOtSpHPvyqBGtSQuQ2Bx2o8W91MX5qY390V5wdEMVUMF1FBIA7gSUDLoCbBjYerN1lnyKQhNTLRgz3YFhzKdjkPwDg+1f/w1Px8sIlhW+pfkeykgwccu3AJZqW19dIWYelVEXXJBFaj7oT/zGJSWC5uAiCxuEG62Gcu0VuNMV/qehXYY2Dyn6bIXS90NauXXxFu8J9WOJdnpWRBONa9OnysCWbaupDn6orLQOBwxRqugt/rut4bXS3NtyqWfEmhTC8/ehYwSzAfhd8tVKZwaaF5lJ+d9CeB+F7Kcb0JpO6gFQyoYbUMonduD+XckZLJ3ACto4cE3GYiADswj+GMte6dxFxW42VDrEPzrQzUmaIPkUS9AS836NbKbl5/TwMiUJC1SkcwbcbMcyIhyCP+83P/j1zrEHMg3Bw8CRdhYV3qX/W70VqywnuC8L7ub/kuk4OtrxbIool/OabivsntnmBGpkB+cuhUC6DwzhAX8="
    - secure: "RfVm3wQOwRPdu86rRnnZW9NdnyvbN34nkr3DrDPUksivnFEbuY7ymRjQy4MzT6Ez8bdCVH36lWxdrU0pCQHGYblvv68GjS2m5F43tLbJNYJBq8HlyNapgAnfdTB/MB96dtUUR0QQmJS/ZYoAzx3c3dWmfDBQXJ/zyZu8YXDQ9id1pk68SGDRB2qgzNWkU/el9IxfYZboo7AAIHi/9/LAxasB/1Lgp6wrhuwqgC54K99TFR0pVdRqOXJX/rP7z2+vOYEyqhOcI4ymBQpZkGVm0VXLSixYcRJCV2Ci+O4vinHXCP7TlKlDZ97E1t1YQ+KVfoewh/7OLIH658OLFMgPhIJROTTioRasM42omdNdm1nzvUxgaGIkVY86n4qJnAd8fjcgrO1oLH5AI17XTwymMfpFm5F64AAwAlJKueJ5gSKUjbMSLBelUoGxqn45bedoqds2shg3S1CfW6XXJqA5KIorAWSfLM62cOAoj0S6falkoB1HZxikovoAQhHGnZiEZH2DNZK251a7iH1l/2+u6xrnDbgZYSFVOSp24mRdO+ynSlLWLywUeS1+esPvLnJMxCrzI0UaoSpaozW9fPD2cDqLIQsFhPSx7Z6vYFQyXhx/G8VFJR1FD/IvpjQhmTpZ8Mrh+TvSA3Q5gm4nKW2cq8/42oFRL5haO7npT4qGl80="
    - DOCKER_HOST: tcp://10.13.37.100:2375
  matrix:
    - KALABOX_TEST_GROUP=drupal7
    - KALABOX_TEST_GROUP=drupal8
    - KALABOX_TEST_GROUP=backdrop
    - KALABOX_TEST_GROUP=wordpress
